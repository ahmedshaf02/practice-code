

<!Doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Weather Api</title>
    <style>
        body{
            /* background-image: url(weather1.jpg);
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed; */
            background-color: #007fc3;
            color: white;
        }
    </style>
  </head>
  <body>

    <div class="container-fluid">
        
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="jumbotron-fluid p-1 rounded-bottom" style="background-color: #1565c0; box-shadow:  -2px -3px 2px 0px rgba(0,0,0,0.3),4px 6px 2px 0px rgba(0,0,0,0.3); ">
                      
                          <h1 class="display-4 ml-2"><span><img src="w1img.png" style="width: 80px; border-radius: 4px;"/></span> Open Weather Api</h1>
                          <p class="lead ml-2">We deliver Current weather and forecasts in your city. Helpful to get Get current weather, clouds, pressure, wind around your location.
                        </p>
                       
                      </div>

                </div>
                <div class="col-12 text-center">
                    <h2 class="text-center"><b>Current weather and forecasts in your city</b></h2>
                </div>
            </div>
        </div>
        <div class="row">

          <!-- by city  -->
          <div class="col-12 col-md-6 col-xl-4"> 
            <div  style="background-color: white;box-shadow: 2px 3px 2px 0px rgba(0,0,0,0.3),4px 6px 2px 0px rgba(0,0,0,0.3); border-radius: 12px;margin: 2px;">
              <div class="col-12">
                <div class="form-inline">
                  <input id="input" class="form-control border-primary mt-3" placeholder="Your city name ex Dubai"/>
                  <button type="submit" id="cityBtn" class="btn btn-outline-primary mt-3 ml-2">Search</button>
                </div>
              </div>
              <div id="cityTemp" class="mt-2">
                <h2 class="text-primary text-center" style="margin-bottom:2px;">Weather in Dubai, AE</h2>
                <h2 class="text-primary text-center"><span><img src="wimg.png" style="width: 40px;"/></span> 20 <sup>o</sup>C</h2>
              </div>

              <div class="col-12" id="city">
                <table class="table table-hover table-sm">
                            
                  <tbody>
                    <tr>
                      
                      <td>Wind</td>
                      <td colspan="2">speed : 2.1 m/s</td>
          
                    </tr>
                    <tr>
                     
                      <td>Cloudiness</td>
                      <td colspan="2">broken clouds</td>
                      
                    </tr>
                    <tr>
                      
                      <td>Pressure</td>
                      <td colspan="2">1017 hpa</td>
                    </tr>
                    <tr>
                      
                      <td>Humidity</td>
                      <td colspan="2">48 %</td>
                    </tr>
                    <tr>
                      
                      <td>Sunrise</td>
                      <td colspan="2">19 : 55</td>
                    </tr>
                    <tr>
                      
                      <td>Sunset</td>
                      <td colspan="2">7 : 41</td>
                    </tr>
                    <tr>
                      
                      <td>Min temp</td>
                      <td colspan="2">12.22</td>
                    </tr>
                    <tr>
                      
                      <td>Max temp</td>
                      <td colspan="2">16.67</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
        </div>
            <!-- by zip code -->
            <div class="col-12 col-md-6 col-xl-4">
              <div  style="background-color: white;box-shadow: 2px 3px 2px 0px rgba(0,0,0,0.3),4px 6px 2px 0px rgba(0,0,0,0.3); border-radius: 12px;margin: 2px;">
                <div class="col-12">
                  <div class="form-inline">
                    <input id="input1" class="form-control border-primary mt-3" placeholder="Your Zip code ex. 94040"/>
                    <button type="submit" id="zipBtn" class="btn btn-outline-primary mt-3 ml-2">Search</button>
                  </div>
                </div>
                <div id="zipTemp" class="mt-2">
                  <h2 class="text-primary text-center" style="margin-bottom:2px;">Weather in Dubai, AE</h2>
                  <h2 class="text-primary text-center"><span><img src="wimg.png" style="width: 40px;"/></span> 20 <sup>o</sup>C</h2>
                </div>

                <div class="col-12" id="zip">
                  <table class="table table-hover table-sm">
                              
                    <tbody>
                      <tr>
                        
                        <td>Wind</td>
                        <td colspan="2">speed : 2.1 m/s</td>
            
                      </tr>
                      <tr>
                       
                        <td>Cloudiness</td>
                        <td colspan="2">broken clouds</td>
                        
                      </tr>
                      <tr>
                        
                        <td>Pressure</td>
                        <td colspan="2">1017 hpa</td>
                      </tr>
                      <tr>
                        
                        <td>Humidity</td>
                        <td colspan="2">48 %</td>
                      </tr>
                      <tr>
                        
                        <td>Sunrise</td>
                        <td colspan="2">19 : 55</td>
                      </tr>
                      <tr>
                        
                        <td>Sunset</td>
                        <td colspan="2">7 : 41</td>
                      </tr>
                      <tr>
                        
                        <td>Min temp</td>
                        <td colspan="2">12.22</td>
                      </tr>
                      <tr>
                        
                        <td>Max temp</td>
                        <td colspan="2">16.67</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
          </div>
          <!-- by geographical coordinates -->
          <div class="col-12 col-md-6 col-xl-4">
            <div  style="background-color: white;box-shadow: 2px 3px 2px 0px rgba(0,0,0,0.3),4px 6px 2px 0px rgba(0,0,0,0.3); border-radius: 12px;margin: 2px;">
              <div class="col-12">
                <div class="form-inline">
                  <input id="input2" class="form-control border-primary mt-3" placeholder="Your Geo coords ex.lat:139 lon:35 "/>
                  <button type="submit" id="geoBtn" class="btn btn-outline-primary mt-3 ml-2">Search</button>
                </div>
              </div>
              <div id="geoTemp" class="mt-2">
                <h2 class="text-primary text-center" style="margin-bottom:2px;">Weather in Dubai, AE</h2>
                <h2 class="text-primary text-center"><span><img src="wimg.png" style="width: 40px;"/></span> 20 <sup>o</sup>C</h2>
              </div>

              <div class="col-12" id="geo">
                <table class="table table-hover table-sm">
                            
                  <tbody>
                    <tr>
                      
                      <td>Wind</td>
                      <td colspan="2">speed : 2.1 m/s</td>
          
                    </tr>
                    <tr>
                     
                      <td>Cloudiness</td>
                      <td colspan="2">broken clouds</td>
                      
                    </tr>
                    <tr>
                      
                      <td>Pressure</td>
                      <td colspan="2">1017 hpa</td>
                    </tr>
                    <tr>
                      
                      <td>Humidity</td>
                      <td colspan="2">48 %</td>
                    </tr>
                    <tr>
                      
                      <td>Sunrise</td>
                      <td colspan="2">19 : 55</td>
                    </tr>
                    <tr>
                      
                      <td>Sunset</td>
                      <td colspan="2">7 : 41</td>
                    </tr>
                    <tr>
                      
                      <td>Min temp</td>
                      <td colspan="2">12.22</td>
                    </tr>
                    <tr>
                      
                      <td>Max temp</td>
                      <td colspan="2">16.67</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
        </div>



            
          
        </div>
    

                
           

    </div>





  

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script>
      var btn = document.getElementById("cityBtn")
      btn.addEventListener("click",function(){
          var xhr = new XMLHttpRequest()
          console.log(xhr)
      var input = document.getElementById("input").value
          console.log(input)
      var url = `https://api.openweathermap.org/data/2.5/weather?q=${input}&units=metric&APPID=409dc801f22f69fa984ead1d03d12f8f`
  
      xhr.open("GET",url) 
      // xhr.setRequestHeader("Content-type","application/json; charset=utf-8")
      xhr.send()    
      xhr.onload = function(){
          console.log(this.status)
          console.log(this.response)
         var data = JSON.parse(this.response)
         console.log(data)
         console.log(data.name)
         console.log(data.main.temp)
         console.log(data.weather[0].description)
         console.log(data.wind)
  
      document.getElementById("cityTemp").innerHTML = `
      <h2 class="text-primary text-center" style="margin-bottom:2px;">Weather in ${data.name}, ${data.sys.country}</h2>
      <h2 class="text-primary text-center"><span><img src="wimg.png" style="width: 40px;"/></span> ${data.main.temp} <sup>o</sup>C</h2>

      `
      document.getElementById("city").innerHTML = `
      <table class="table table-hover table-sm">
            
            <tbody>
              <tr>
                
                <td>Wind</td>
                <td colspan="2">speed : ${data.wind.speed} m/s</td>
    
              </tr>
              <tr>
                
                <td>Cloudiness</td>
                <td colspan="2">${data.weather[0].description}</td>
                
              </tr>
              <tr>
                
                <td>Pressure</td>
                <td colspan="2">${data.main.pressure} hpa</td>
              </tr>
              <tr>
                
                <td>Humidity</td>
                <td colspan="2">${data.main.humidity} %</td>
              </tr>
              <tr>
                
                <td>Sunrise</td>
                <td colspan="2">${timeStamp(data.sys.sunrise)}</td>
              </tr>
              <tr>
                
                <td>Sunset</td>
                <td colspan="2">${timeStamp(data.sys.sunset)}</td>
              </tr>
              <tr>
                
                <td>Min temp</td>
                <td colspan="2">${data.main.temp_min}</td>
              </tr>
              <tr>
                
                <td>Max temp</td>
                <td colspan="2">${data.main.temp_max}</td>
              </tr>
            </tbody>
          </table>`
          function timeStamp(time){
            var t= new Date(time*1000)
            var hr = t.getHours();
            var mins = "0"+t.getMinutes();
            var sec = "0"+ t.getSeconds()
            var date = t.getDate()
            var date1 = t.getMonth()
            return hr+ " : "+mins.substr(-2)
          
        }

        }
      })

      var btn = document.getElementById("zipBtn")
      btn.addEventListener("click",function(){
          var xhr = new XMLHttpRequest()
          console.log(xhr)
      var input = document.getElementById("input1").value
          console.log(input)
      var url = `https://api.openweathermap.org/data/2.5/weather?zip=${input}&units=metric&APPID=409dc801f22f69fa984ead1d03d12f8f`
  
      xhr.open("GET",url) 
      // xhr.setRequestHeader("Content-type","application/json; charset=utf-8")
      xhr.send()    
      xhr.onload = function(){
          console.log(this.status)
          console.log(this.response)
         var data = JSON.parse(this.response)
         console.log(data)
         console.log(data.name)
         console.log(data.main)
         console.log(data.weather[0].description)
         console.log(data.wind)
  
      document.getElementById("zipTemp").innerHTML = `
      <h2 class="text-primary text-center" style="margin-bottom:2px;">Weather in ${data.name}, ${data.sys.country}</h2>
      <h2 class="text-primary text-center"><span><img src="wimg.png" style="width: 40px;"/></span> ${data.main.temp} <sup>o</sup>C</h2>

      `
      document.getElementById("zip").innerHTML = `
      <table class="table table-hover table-sm">
            
            <tbody>
              <tr>
                
                <td>Wind</td>
                <td colspan="2">speed : ${data.wind.speed} m/s</td>
    
              </tr>
              <tr>
                
                <td>Cloudiness</td>
                <td colspan="2">${data.weather[0].description}</td>
                
              </tr>
              <tr>
                
                <td>Pressure</td>
                <td colspan="2">${data.main.pressure} hpa</td>
              </tr>
              <tr>
                
                <td>Humidity</td>
                <td colspan="2">${data.main.humidity} %</td>
              </tr>
              <tr>
                
                <td>Sunrise</td>
                <td colspan="2">${timeStamp(data.sys.sunrise)}</td>
              </tr>
              <tr>
                
                <td>Sunset</td>
                <td colspan="2">${timeStamp(data.sys.sunset)}</td>
              </tr>
              <tr>
                
                <td>Min temp</td>
                <td colspan="2">${data.main.temp_min}</td>
              </tr>
              <tr>
                
                <td>Max temp</td>
                <td colspan="2">${data.main.temp_max}</td>
              </tr>
            </tbody>
          </table>`
          function timeStamp(time){
            var t= new Date(time*1000)
            var hr = t.getHours();
            var mins = "0"+t.getMinutes();
            var sec = "0"+ t.getSeconds()
            var date = t.getDate()
            var date1 = t.getMonth()
            return hr+ " : "+mins.substr(-2)
          
        }

        }
      })
      </script>
  </body>
</html>